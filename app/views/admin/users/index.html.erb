<h1>全ユーザー一覧</h1>

<table class="table table-striped table-hover">
  <thead class="thead-dark">
    <tr>
      <th>氏名</th>
      <th>メールアドレス</th>
      <th>ステータス</th>
      <th>アクション</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr class="<%= 'table-secondary' if user.is_deleted %>">
        <td>
          <%= link_to user.name, admin_user_path(user), class: "text-primary", title: "詳細を見る" %>
        </td>
        <td><%= user.email %></td>
        <td>
          <% if user.is_deleted %>
            <span class="badge badge-danger">退会済</span>
          <% else %>
            <span class="badge badge-success">有効</span>
          <% end %>
        </td>
        <td class="d-flex gap-2">
          <% if user.is_deleted %>
            <%= link_to reactivate_admin_user_path(user), method: :patch, class: 'btn btn-outline-success btn-sm', title: '再有効化' do %>
              <i class="fas fa-user-check"></i> 再有効化
            <% end %>
          <% else %>
            <%= link_to withdraw_admin_user_path(user), method: :patch, data: { confirm: '本当に退会させますか？' }, class: 'btn btn-outline-warning btn-sm', title: '退会' do %>
              <i class="fas fa-user-slash"></i> 退会
            <% end %>
          <% end %>

          <%= link_to admin_user_path(user), method: :delete, data: { confirm: '本当に削除しますか？' }, class: 'btn btn-outline-danger btn-sm', title: '削除' do %>
            <i class="fas fa-trash-alt"></i> 削除
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

