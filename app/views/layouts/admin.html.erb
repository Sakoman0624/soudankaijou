<!DOCTYPE html>
<html>
<head>
  <title>Admin - Soudankaijou</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <script src="https://kit.fontawesome.com/f074eb6831.js" crossorigin="anonymous"></script>
  <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>
<body class="bg-light">
  <% if admin_signed_in? %>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
      <span class="navbar-brand">🛠 管理画面</span>

      <div class="ml-auto d-flex align-items-center">
        <span class="text-white mr-3">
          管理者: <strong><%= current_admin.email %></strong>
        </span>

        <%= link_to destroy_user_session_path, method: :delete, class: "btn btn-sm btn-outline-light" do %>
          <i class="fa-solid fa-right-from-bracket"></i> ログアウト
        <% end %>
      </div>
    </nav>

    <div class="bg-white border-bottom py-2 px-3 mb-3 shadow-sm">
      <span class="badge badge-secondary">現在のページ:</span>
      <span class="ml-2 font-weight-bold">
        <%= content_for?(:page_title) ? yield(:page_title) : controller.controller_name.humanize %>
      </span>
    </div>

    <div class="container-fluid">
      <div class="row">
        <aside class="col-md-2 bg-light border-right py-3">
          <div class="nav flex-column">
            <%= link_to "ダッシュボード", admin_dashboards_path, class: "btn btn-outline-primary mb-2" %>
            <%= link_to "ユーザー一覧", admin_users_path, class: "btn btn-outline-success mb-2" %>
            <%= link_to "部屋一覧", admin_rooms_path, class: "btn btn-outline-info mb-2" %>
          </div>
        </aside>

        <main class="col-md-10 py-3">
          <%= yield %>
        </main>
      </div>
    </div>

    <footer class="bg-dark text-white text-center py-3 mt-5">
      <small>&copy; <%= Time.current.year %> Soudankaijou 管理者画面</small>
    </footer>
  <% else %>
    <%= yield %> <!-- ログイン画面用 -->
  <% end %>
</body>
</html>

